{"version":3,"file":"chunk-pg-user-4bc47dbe.js","sources":["../../../../components/UserComponents/DashboardList.vue","../../../../components/UserComponents/FavoritesCard.vue","../../../../pages/user/favorite.vue","../../../../pages/user/index.vue","../../../../../../img/mini-logo.svg","../../../../pages/user/login.vue","../../../../pages/user/orders/[id].vue","../../../../pages/user/orders/index.vue"],"sourcesContent":["<template>\r\n    <aside class=\"col-lg-2 col-xl-2\">\r\n\r\n        <nav class=\"mb-4 onmalika-user-navigation\">\r\n            <NuxtLink class=\"nav-link\" to=\"/user\">\r\n                <span>\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z\"\r\n                            stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                        <path d=\"M12 8V13\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path d=\"M11.9946 16H12.0036\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                    </svg>\r\n                    Информация\r\n                </span>\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                        d=\"M5.19751 11.6199L9.00084 7.81655C9.45001 7.36738 9.45001 6.63238 9.00084 6.18322L5.19751 2.37988\"\r\n                        stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\" />\r\n                </svg>\r\n\r\n            </NuxtLink>\r\n            <NuxtLink class=\"nav-link\" to=\"/user/favorite\" @click.native=\"goToFavorites\">\r\n                <span>\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path\r\n                            d=\"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z\"\r\n                            stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                    </svg>\r\n                    Избранные\r\n                </span>\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                        d=\"M5.19751 11.6199L9.00084 7.81655C9.45001 7.36738 9.45001 6.63238 9.00084 6.18322L5.19751 2.37988\"\r\n                        stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\" />\r\n                </svg>\r\n            </NuxtLink>\r\n            <NuxtLink class=\"nav-link\" to=\"/user/orders\" @click.native=\"goToOrders\">\r\n                <span>\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path\r\n                            d=\"M22 6V8.42C22 10 21 11 19.42 11H16V4.01C16 2.9 16.91 2 18.02 2C19.11 2.01 20.11 2.45 20.83 3.17C21.55 3.9 22 4.9 22 6Z\"\r\n                            stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path\r\n                            d=\"M2 7V21C2 21.83 2.94 22.3 3.6 21.8L5.31 20.52C5.71 20.22 6.27 20.26 6.63 20.62L8.29 22.29C8.68 22.68 9.32 22.68 9.71 22.29L11.39 20.61C11.74 20.26 12.3 20.22 12.69 20.52L14.4 21.8C15.06 22.29 16 21.82 16 21V4C16 2.9 16.9 2 18 2H7H6C3 2 2 3.79 2 6V7Z\"\r\n                            stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path d=\"M9 13.0098H12\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path d=\"M9 9.00977H12\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path d=\"M5.99561 13H6.00459\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path d=\"M5.99561 9H6.00459\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                    </svg>\r\n                    Заказы\r\n                </span>\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                        d=\"M5.19751 11.6199L9.00084 7.81655C9.45001 7.36738 9.45001 6.63238 9.00084 6.18322L5.19751 2.37988\"\r\n                        stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\" />\r\n                </svg>\r\n            </NuxtLink>\r\n            <NuxtLink class=\"nav-link\" to=\"/user/settings\">\r\n                <span>\r\n                    Настройки\r\n                </span>\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                        d=\"M5.19751 11.6199L9.00084 7.81655C9.45001 7.36738 9.45001 6.63238 9.00084 6.18322L5.19751 2.37988\"\r\n                        stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\" />\r\n                </svg>\r\n            </NuxtLink>\r\n            <NuxtLink class=\"nav-link\" @click.prevent=\"logOutClick\" to=\"/\">\r\n                <span>\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path\r\n                            d=\"M8.8999 7.56023C9.2099 3.96023 11.0599 2.49023 15.1099 2.49023H15.2399C19.7099 2.49023 21.4999 4.28023 21.4999 8.75023V15.2702C21.4999 19.7402 19.7099 21.5302 15.2399 21.5302H15.1099C11.0899 21.5302 9.2399 20.0802 8.9099 16.5402\"\r\n                            stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                        <path d=\"M2 12H14.88\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\" />\r\n                        <path d=\"M12.6499 8.6499L15.9999 11.9999L12.6499 15.3499\" stroke=\"black\" stroke-width=\"1.5\"\r\n                            stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                    </svg>\r\n\r\n                    Выйти\r\n                </span>\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                        d=\"M5.19751 11.6199L9.00084 7.81655C9.45001 7.36738 9.45001 6.63238 9.00084 6.18322L5.19751 2.37988\"\r\n                        stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\" />\r\n                </svg>\r\n            </NuxtLink>\r\n\r\n        </nav>\r\n        <!--   COMPONENT MENU LIST END .//   -->\r\n    </aside>\r\n</template>\r\n\r\n<script setup>\r\nimport { useAuthStore } from '~/store/auth'\r\nconst authStore = useAuthStore();\r\nconst router = useRouter()\r\nconst logOutClick = async () => {\r\n    try {\r\n        await $fetch('/api/logout');\r\n        authStore.logout();\r\n    } catch (error) {\r\n        console.error('Ошибка при выходе из системы', error);\r\n    }\r\n}\r\nconst goToFavorites = async (event) => {\r\n    await router.push('/user/favorite')\r\n    location.reload()\r\n}\r\nconst goToOrders = async (event) => {\r\n    await router.push('/user/orders')\r\n    location.reload()\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"col\">\r\n        <div class=\"card onmalika-card h-100\">\r\n\r\n            <div class=\"onmalika-card-badges\">\r\n                <span class=\"badge onmalika-card-badges-new\" style=\"background-color: #80EE98;\">new</span>\r\n                <span class=\"badge onmalika-card-badges-new\" style=\"background-color: #FF4A4A;\">-20%</span>\r\n            </div>\r\n\r\n            <button class=\"onmalika-card-favorite active\" @click=\"deleteFromFavorites\">\r\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path\r\n                        d=\"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z\"\r\n                        stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                </svg>\r\n\r\n            </button>\r\n            <NuxtLink\r\n                :to=\"'/shop' + '/' + product_info.product.category.parent.slug + '/' + product_info.product.category.slug + '/' + product_info.product.slug\">\r\n                <img v-if=\"product_info.product && product_info.product.image && product_info.product.image.url\"\r\n                    :src=\"baseurl + product_info.product.image.url\" class=\"card-img-top\" alt=\"...\" />\r\n                <img v-else src=\"https://placehold.co/250x250\" class=\"w-100\" alt=\"\" />\r\n            </NuxtLink>\r\n            <div class=\"card-body onmalika-card-body\">\r\n\r\n                <h5 class=\"onmalika-card-title\">{{ product_info.product.name }}</h5>\r\n\r\n                <div class=\"onmalika-card-stock\">\r\n                    <div class=\"stock in-stock\">\r\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z\"\r\n                                stroke=\"#46AC36\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                            <path d=\"M7.75 11.9999L10.58 14.8299L16.25 9.16992\" stroke=\"#46AC36\" stroke-width=\"1.5\"\r\n                                stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                        </svg>\r\n                        <p> Есть в наличии</p>\r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"onmalika-card-price\">\r\n                    <span :class=\"{ 'active': product_info.product.sales_price }\"> {{ getPriceText() }}</span>\r\n                    <p :class=\"{ 'd-none': !product_info.product.sales_price }\">{{ product_info.product.sales_price\r\n                    }}</p>\r\n                </div>\r\n                <div class=\"onmalika-card-body-orderbtn \">\r\n                    <button @click=\"addToCart(product_info.product)\" type=\"button\"\r\n                        class=\"btn dark-cover w-50 justify-content-center\">\r\n                        В корзину</button>\r\n                    <p>\r\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path\r\n                                d=\"M13.5639 4.3011L15.1502 7.49508C15.364 7.93681 15.9378 8.35588 16.4216 8.44649L19.2905 8.92219C21.1244 9.22799 21.5519 10.5645 20.2356 11.901L17.9967 14.1549C17.6254 14.5286 17.4116 15.2649 17.5354 15.7972L18.1767 18.5834C18.683 20.7807 17.5129 21.6415 15.589 20.4862L12.9001 18.8779C12.4163 18.5834 11.6062 18.5834 11.1224 18.8779L8.43351 20.4862C6.50963 21.6302 5.33955 20.7807 5.84583 18.5834L6.48712 15.7972C6.58838 15.2535 6.37462 14.5173 6.00334 14.1436L3.76444 11.8896C2.4481 10.5645 2.87563 9.22799 4.7095 8.91086L7.57845 8.43516C8.06223 8.35588 8.63602 7.92548 8.84979 7.48376L10.4361 4.28977C11.3025 2.56819 12.6975 2.56819 13.5639 4.3011Z\"\r\n                                fill=\"#FFB800\" />\r\n                        </svg>\r\n                        5.0\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n \r\n<script setup>\r\nimport { useCartStore } from '~/store/cart';\r\nconst CartStore = useCartStore()\r\nconst token_access = useCookie('token_access');\r\nconst props = defineProps({\r\n    product_info: {\r\n        type: Object,\r\n        required: true,\r\n    },\r\n\r\n});\r\nconst { product_info } = props;\r\nconst baseurl = 'https://admin.itpapa.uz'\r\n\r\nconst addToCart = (product) => {\r\n    CartStore.addToCart(product, 1);\r\n}\r\nconst deleteFromFavorites = async () => {\r\n    setTimeout(() => {\r\n        location.reload();\r\n    }, 100);\r\n\r\n    try {\r\n        const response = await useJsonPlaceholderData('/user/favorites/' + product_info.id, {\r\n            headers: {\r\n                Authorization: `Bearer ${token_access.value}`\r\n            },\r\n            method: \"DELETE\"\r\n        });\r\n        console.log(response)\r\n\r\n    } catch (error) {\r\n        console.error('Ошибка при удалении товара: ', error);\r\n        // Обработка исключения\r\n    }\r\n};\r\nimport { useCurrencyStore } from '~/store/currencyStore';\r\nconst currencyStore = useCurrencyStore();\r\n\r\n\r\nconst getPriceText = () => {\r\n    const currency = currencyStore.selectedCurrency;\r\n    const priceInfo = product_info.product.prices_in_currencies[currency];\r\n    if (!priceInfo) {\r\n        return \"Цена не указана\";\r\n    }\r\n    return `${priceInfo.price} ${priceInfo.symbol}`;\r\n};\r\n</script>\r\n\r\n","<template>\r\n    <div>\r\n\r\n        <div class=\"container\">\r\n            <nav aria-label=\"breadcrumb\">\r\n                <ol class=\"breadcrumb onmalika-breadcrumb\">\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/\">Главная</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/user\">Профиль</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">Избранные</li>\r\n                </ol>\r\n            </nav>\r\n\r\n        </div> <!-- container //  -->\r\n\r\n        <section class=\"padding-y\">\r\n            <div class=\"container\" v-if=\"authStore.user\">\r\n                <h1>Избранные</h1>\r\n                <div class=\"row\">\r\n                    <UserComponentsDashboardList />\r\n                    <div class=\"col-10\">\r\n                        <div class=\"row row-cols-3\" v-if=\"favorite_products && favorite_products.length > 0\">\r\n                            <UserComponentsFavoritesCard v-for=\"userFav in favorite_products\" :key=\"userFav.product.id\"\r\n                                :product_info=\"userFav\" :userFav=\"true\" />\r\n                        </div>\r\n                        <div class=\"empty-cart\" v-else>\r\n                            <h4> В избранном пока нет товаров</h4>\r\n                            <p>Товары можно добавить, нажав на <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\r\n                                    xmlns=\"http://www.w3.org/2000/svg\">\r\n                                    <path\r\n                                        d=\"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z\"\r\n                                        stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                </svg></p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </section>\r\n    </div>\r\n</template>\r\n \r\n<script setup>\r\n\r\nimport { useAuthStore } from '~/store/auth';\r\nconst route = useRoute()\r\nconst token_access = useCookie('token_access');\r\n\r\nconst authStore = useAuthStore();\r\ndefinePageMeta({\r\n    middleware: 'auth'\r\n})\r\n\r\nconst { data: favorite_products } = await useJsonPlaceholderData('/user/favorites/', {\r\n    method: \"GET\",\r\n    headers: {\r\n        Authorization: `Bearer ${token_access.value}`\r\n    }\r\n})\r\nwatch(() => route.path, (newPath) => {\r\n    if (newPath === '/user/favorite' && !localStorage.getItem('reloaded')) {\r\n        localStorage.setItem('reloaded', 'true');\r\n        window.location.reload();\r\n    }\r\n});\r\n\r\n\r\n// Сброс флага, если пользователь покидает страницу\r\nwatch(() => route.path, (newPath) => {\r\n    if (newPath !== '/user/favorite') {\r\n        localStorage.removeItem('reloaded');\r\n    }\r\n});\r\n\r\n\r\n</script>\r\n\r\n","<template>\r\n    <div v-if=\"authStore.user\">\r\n        <div class=\"container\">\r\n            <nav aria-label=\"breadcrumb\">\r\n                <ol class=\"breadcrumb onmalika-breadcrumb\">\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/\">Главная</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">Профиль</li>\r\n                </ol>\r\n            </nav>\r\n        </div>\r\n        <section>\r\n            <div class=\"container\">\r\n                <h1>Профиль</h1>\r\n                <div class=\"row\">\r\n                    <UserComponentsDashboardList />\r\n                    <div class=\"col-lg-10  col-xl-10\">\r\n                        <div class=\"onmalika-user-settings\">\r\n                            <form>\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-6 mb-3\">\r\n                                        <label for=\"userChangeName\" class=\"form-label\">Ваше имя</label>\r\n                                        <input v-model=\"name\" type=\"text\" class=\"form-control\" id=\"userChangeName\">\r\n                                    </div>\r\n                                    <div class=\"col-6 mb-3\">\r\n                                        <label for=\"userChangeSurName\" class=\"form-label\">Ваша фамилия</label>\r\n                                        <input v-model=\"surname\" type=\"text\" class=\"form-control\" id=\"userChangeSurName\">\r\n                                    </div>\r\n                                    <div class=\"col-6 mb-3\">\r\n                                        <label for=\"userChangeNumber\" class=\"form-label\">Ваш номер</label>\r\n                                        <input v-model=\"number\" type=\"text\" class=\"form-control\" id=\"userChangeNumber\">\r\n                                    </div>\r\n                                    <div class=\"col-6 mb-3\">\r\n                                        <label for=\"userChangeNumber\" class=\"form-label\">Ваш email</label>\r\n                                        <input v-model=\"email\" type=\"email\" class=\"form-control\" id=\"userChangeNumber\">\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                                    <button type=\"submit\" @click.prevent=\"changeData\" class=\"btn dark-cover\"> Применить\r\n                                        изменения</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n<script setup>\r\n\r\nimport { useAuthStore } from '~/store/auth';\r\nconst authStore = useAuthStore();\r\nconst token_access = useCookie('token_access');\r\n\r\nconst name = ref(authStore.user.first_name);\r\nconst surname = ref(authStore.user.last_name);\r\nconst number = ref(authStore.user.phone_number);\r\nconst email = ref(authStore.user.email);\r\n\r\nconst changeData = async () => {\r\n\r\n    const resp = await useJsonPlaceholderData('/user/', {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Authorization: `Bearer ${token_access.value}`\r\n        },\r\n        body: {\r\n            id: authStore.user.id,\r\n            username: authStore.user.username,\r\n            first_name: name.value,\r\n            last_name: surname.value,\r\n            phone_number: number.value,\r\n            email: email.value,\r\n\r\n        }\r\n    })\r\n    console.log(resp)\r\n    location.reload()\r\n}\r\ndefinePageMeta({\r\n    middleware: 'auth'\r\n})\r\nuseHead({\r\n    title: \"Кабинет\",\r\n    meta: [\r\n\r\n    ],\r\n})\r\n</script>\r\n\r\n","export default \"__VITE_PUBLIC_ASSET__2a15b929__\"","<template>\r\n    <div>\r\n        <div class=\"container\">\r\n            <nav aria-label=\"breadcrumb\">\r\n                <ol class=\"breadcrumb onmalika-breadcrumb\">\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/\">Главная</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">Авторизация</li>\r\n                </ol>\r\n            </nav>\r\n        </div>\r\n        <section>\r\n            <div class=\"container\">\r\n\r\n\r\n                <div class=\"onmalika-auth\">\r\n                    <div v-if=\"errorMessage\" class=\"alert text-center alert-danger\">{{ errorMessage }}</div>\r\n                    <div class=\"user-form\">\r\n                        <div class=\"text-center mb-5\">\r\n                            <img src=\"/img/mini-logo.svg\" alt=\"\">\r\n                        </div>\r\n                        <form @submit.prevent=\"sendCode\" :class=\"{ 'd-none': isSend }\">\r\n                            <div class=\"mb-3\">\r\n\r\n                                <input autocomplete=\"username\" placeholder=\"Введите ваш номер\" type=\"tel\"\r\n                                    class=\"form-control\" v-model=\"number\" id=\"userLogin\" aria-describedby=\"userHelp\"\r\n                                    required>\r\n\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn dark-cover justify-content-center w-100\">Получить код</button>\r\n                        </form>\r\n                        <div :class=\"{ 'd-none': !isSend }\">\r\n                            <form @submit.prevent=\"authUserbyLogin\">\r\n                                <div class=\"mb-4\" style=\"display: flex; flex-direction: row; justify-content:  center;\">\r\n                                    <v-otp-input ref=\"otpInput\" v-model=\"bindModal\" input-classes=\"otp-input\" separator=\"\"\r\n                                        :num-inputs=\"6\" value=\"\" :should-auto-focus=\"true\" input-type=\"letter-numeric\"\r\n                                        :conditionalClass=\"['one', 'two', 'three', 'four']\"\r\n                                        :placeholder=\"['*', '*', '*', '*', '*', '*']\" @on-complete=\"handleOnComplete\" />\r\n                                </div>\r\n                                <button type=\"submit\"\r\n                                    class=\"btn dark-cover justify-content-center mb-3 w-100\">Войти</button>\r\n\r\n                                <div class=\"text-center\" v-if=\"!canResend\">Повторная отправка кода возможна через: {{ timer\r\n                                }} секунд</div>\r\n                                <button v-else @click=\"resendCode\"\r\n                                    class=\"btn dark-cover justify-content-center w-100\">Отправить код еще\r\n                                    раз</button>\r\n\r\n                            </form>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport VOtpInput from \"vue3-otp-input\";\r\nimport { useAuthStore } from '~/store/auth'\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst errorMessage = ref('');\r\nconst authStore = useAuthStore();\r\nconst number = ref('');\r\n\r\nconst timer = ref(60);\r\nlet timeoutId = null;\r\nconst canResend = ref(false);\r\nconst token = ref()\r\nconst isSend = ref(false)\r\nconst otpInput = ref(null);\r\nconst bindModal = ref(\"\");\r\nconst otpValue = ref(\"\")\r\nconst isRegistered = ref()\r\nconst handleOnComplete = (value) => {\r\n    otpValue.value = value\r\n};\r\nconst sendCode = async () => {\r\n\r\n    try {\r\n        const response = await useJsonPlaceholderData('/user/auth/', {\r\n            cache: false,\r\n            method: 'POST',\r\n            body: { phone_number: number.value },\r\n        });\r\n        if (response.error && response.error.value && response.error.value.statusCode == 418) {\r\n            alert(\"Неверный формат номера телефона\")\r\n            number.value = '';\r\n\r\n        } else {\r\n            handleResponse(response)\r\n            isSend.value = true\r\n        }\r\n    }\r\n    catch (e) {\r\n        console.error('Ошибка получения пользователя', e);\r\n    }\r\n}\r\nfunction startTimer(duration) {\r\n    timer.value = duration;\r\n    canResend.value = false;\r\n    timeoutId = setInterval(() => {\r\n        if (timer.value > 0) {\r\n            timer.value -= 1;\r\n        } else {\r\n            clearInterval(timeoutId);\r\n            canResend.value = true;\r\n        }\r\n    }, 1000);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    if (response.error && response.error.value && response.error.value.data.timeout) {\r\n        startTimer(response.error.value.data.timeout);\r\n    } else {\r\n        isSend.value = true;\r\n        startTimer(60);\r\n    }\r\n}\r\n\r\nasync function resendCode() {\r\n    try {\r\n        const response = await useJsonPlaceholderData('/user/auth/', {\r\n            cache: false,\r\n            method: 'POST',\r\n            body: { phone_number: number.value },\r\n        });\r\n\r\n        startTimer(60);\r\n    }\r\n    catch {\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nconst authUserbyLogin = async () => {\r\n    try {\r\n        if (otpValue.value.length == 6) {\r\n            const response = await useJsonPlaceholderData('/user/auth/', {\r\n                cache: false,\r\n                method: 'PUT',\r\n                body: { phone_number: number.value, otp: otpValue.value },\r\n            });\r\n            if (response.status.value === 'success') {\r\n                const token_access = useCookie('token_access')\r\n                const token_refresh = useCookie('token_refresh')\r\n                function work(par1, par2, par3) {\r\n                    par1.value = response.data.value.access\r\n                    par2.value = response.data.value.refresh\r\n                    par3.value = response.data.value.created\r\n                }\r\n                work(token_access, token_refresh, isRegistered)\r\n                token.value = response.data.value.access\r\n\r\n                const getUser = await useJsonPlaceholderData('/user/', {\r\n                    cache: false,\r\n                    headers: {\r\n                        Authorization: `Bearer ${token.value}`\r\n                    }\r\n                })\r\n\r\n                authStore.login(getUser.data.value)\r\n                number.value = '';\r\n                otpValue.value = '';\r\n                const redirect = route.query.redirect;\r\n                if (redirect === 'cart') {\r\n                    await router.push('/checkout');\r\n                } else if (redirect === 'checkout') {\r\n                    await router.push('/checkout');\r\n                } else {\r\n                    if (isRegistered.value == false) {\r\n                        await router.push('/user');\r\n                    } else {\r\n                        await router.push('/user/settings');\r\n\r\n                    }\r\n                }\r\n                location.reload()\r\n\r\n\r\n            } else {\r\n                errorMessage.value = 'Вы ввели неправильный код';\r\n                otpInput.value.otp = ['', '', '', '', '', '']\r\n                console.log(otpInput)\r\n            }\r\n        } else {\r\n            alert('Нет, тут не 6')\r\n        }\r\n\r\n    }\r\n    catch (e) {\r\n        console.error('Ошибка аутентификации', e);\r\n        number.value = '';\r\n        otpValue.value = '';\r\n    }\r\n}\r\nonMounted(() => {\r\n    const isAuthenticated = authStore.isAuthenticated;\r\n\r\n    if (isAuthenticated) {\r\n        router.push('/user');\r\n    }\r\n});\r\nuseSeoMeta({\r\n    title: 'Авторизация'\r\n})\r\n\r\n</script>\r\n","<template>\r\n    <div>\r\n        <section class=\"bg-primary padding-y-sm\">\r\n            <div class=\"container\">\r\n\r\n                <ol class=\"breadcrumb ondark mb-0\">\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/\">Главная</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/user\">Кабинет</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/user/orders\">Заказы</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">Заказ #{{ order.id }}</li>\r\n                </ol>\r\n\r\n            </div> <!-- container //  -->\r\n        </section>\r\n        <section class=\"padding-y\">\r\n            <div class=\"container\">\r\n                <h2>Заказ #{{ order.id }}</h2>\r\n                <h3>Общая сумма {{ order.total_price }}$</h3>\r\n                <h4 class=\"mb-3\">Товары которые вы заказли</h4>\r\n                <div class=\"row align-items-center mb-3\" v-for=\"item in order.items\">\r\n                    <div class=\"col-2\">\r\n                        <img  :src=\"'https://admin.itpapa.uz' + item.product.image.url\" class=\"w-100\" alt=\"\" />\r\n                    </div>\r\n                    <div class=\"col-3\">\r\n                        <h6>\r\n                            {{ item.product.name }}\r\n                        </h6>\r\n                    </div>\r\n                    <div class=\"col-2\">\r\n                        <h6>\r\n                            Кол-во: {{ item.quantity }}\r\n                        </h6>\r\n                    </div>\r\n                    <div class=\"col-2\">\r\n                        <h6>\r\n                            Цена товара: <br> {{ getPriceInSelectedCurrency(item.product) }}\r\n                        </h6>\r\n                    </div>\r\n                    <div class=\"col-3\">\r\n                        <h6>Общая сумма этого товара <br>\r\n                            {{ item.total_price }}$\r\n                        </h6>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nconst token_access = useCookie('token_access');\r\nconst route = useRoute()\r\n\r\nconst { data: order } = await useJsonPlaceholderData('/user/orders/' + route.params.id, {\r\n    method: \"GET\",\r\n    headers: {\r\n        Authorization: `Bearer ${token_access.value}`\r\n    }\r\n})\r\nif (!order.value || !order.value.id || !order.value.items) {\r\n    throw createError({ statusCode: 404, message: 'Такого заказа не существует' })\r\n}\r\nimport { useCurrencyStore } from '~/store/currencyStore';\r\nconst currencyStore = useCurrencyStore();\r\nconst getPriceInSelectedCurrency = (product) => {\r\n    const selectedCurrency = currencyStore.selectedCurrency;\r\n    const priceInfo = product.prices_in_currencies[selectedCurrency];\r\n    if (!priceInfo) {\r\n        return \"Цена не указана\";\r\n    }\r\n    return `${priceInfo.price} ${priceInfo.symbol}`;\r\n};\r\ndefinePageMeta({\r\n    middleware: 'auth'\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>","<template>\r\n    <div>\r\n        <section class=\"bg-primary padding-y-sm\">\r\n            <div class=\"container\">\r\n\r\n                <ol class=\"breadcrumb ondark mb-0\">\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/\">Главная</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item\">\r\n                        <NuxtLink to=\"/user\">Кабинет</NuxtLink>\r\n                    </li>\r\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">Избранные</li>\r\n                </ol>\r\n\r\n            </div> <!-- container //  -->\r\n        </section>\r\n        <section class=\"padding-y\">\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <UserComponentsDashboardList />\r\n                    <div class=\"col-9\">\r\n                        <h1>Заказы</h1>\r\n                        <div class=\"row mb-3 order-head\">\r\n                            <div class=\"col-2\">Номер Заказа</div>\r\n                            <div class=\"col-2\">Статус</div>\r\n                            <div class=\"col-3\">Время</div>\r\n                            <div class=\"col-3\">Сумма</div>\r\n                            <div class=\"col-2\">Подробнее</div>\r\n                        </div>\r\n                        <div class=\"order-list\" v-for=\"order in order_list\" :key=\"order.id\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-2\">\r\n                                    <div class=\"order-item\">\r\n                                        #{{ order.id }}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-2\">\r\n                                    <div class=\"order-item\">\r\n                                        Неизвестно\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-3\">\r\n                                    <div class=\"order-item\">\r\n                                        {{ order.created_at }}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-3\">\r\n                                    <div class=\"order-item\">\r\n                                        {{ order.total_price }}$\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-2\">\r\n                                    <div class=\"order-item\">\r\n                                        <NuxtLink :to=\"'/user/orders/' + order.id\"> К заказу\r\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\r\n                                                viewBox=\"0 0 16 16\" fill=\"none\">\r\n                                                <path d=\"M2.5 8H13.5\" stroke=\"#2DA5F3\" stroke-width=\"1.5\"\r\n                                                    stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                                <path d=\"M9 3.5L13.5 8L9 12.5\" stroke=\"#2DA5F3\" stroke-width=\"1.5\"\r\n                                                    stroke-linecap=\"round\" stroke-linejoin=\"round\" />\r\n                                            </svg>\r\n                                        </NuxtLink>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nconst token_access = useCookie('token_access');\r\n\r\nconst { data: order_list } = await useJsonPlaceholderData('/user/orders/', {\r\n    method: \"GET\",\r\n    headers: {\r\n        Authorization: `Bearer ${token_access.value}`\r\n    }\r\n})\r\n\r\ndefinePageMeta({\r\n    middleware: 'auth'\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.order-head {\r\n    background-color: #E4E7E9;\r\n    color: #000;\r\n    padding: 10px 0;\r\n}\r\n\r\n.order-list {\r\n    a {\r\n        text-decoration: none;\r\n        color: #2DA5F3;\r\n    }\r\n\r\n    .order-item {\r\n        padding: 10px 0;\r\n    }\r\n}\r\n</style>"],"names":["_withAsyncContext"],"mappings":"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"}