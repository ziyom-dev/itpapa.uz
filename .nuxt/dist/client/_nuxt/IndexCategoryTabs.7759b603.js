import{c as $}from"./entry.cccafffc.js";import{z as y,E as h,A as _,h as w,o,c as r,a as c,F as m,r as v,B as g,t as B,l as C,k as L,H as P}from"./chunk-pg-brands.8ca8676c.js";import"./chunk-pg-misc.dcceac43.js";import"./chunk-pg-user.976fd428.js";const F={class:"category-tablist"},N={class:"row"},V={class:"col-6"},z={class:"nav nav-pills onmalika-index-categories mb-3",id:"pills-tab",role:"tablist"},A=["onClick","id","data-bs-target","aria-controls"],D={class:"tab-content",id:"pills-tabContent"},E=["id","aria-labelledby"],I={key:0,class:"grid-parent"},R={__name:"IndexCategoryTabs",async setup(M){let s,d;const f=y(99),l=y([]),{data:u}=([s,d]=h(()=>_("/categories/?parent="+f.value)),s=await s,d(),s);if(u&&u.value&&u.value.results){const n=u.value.results.map(t=>_(`/products/?category=${t.id}&limit=7`).then(e=>(t.products=e.data.value,t))),p=([s,d]=h(()=>Promise.all(n)),s=await s,d(),s);l.value=p}const b=async(n,p)=>{if(!n.productsLoaded)try{const t=await _(`/products/?category=${n.id}&limit=7`);if(t&&t.data&&t.data.value&&t.data.value.results){const e={...n,products:t.data.value.results,productsLoaded:!0};l.value=l.value.map((a,i)=>i===p?e:a)}else console.error("Полученный ответ не содержит ожидаемых данных:",t)}catch(t){console.error("Ошибка при загрузке продуктов для категории:",t)}};return w(()=>{setTimeout(()=>{b(l.value[0],0)},500)}),(n,p)=>{const t=$;return o(),r("div",F,[c("div",N,[c("div",V,[c("ul",z,[(o(!0),r(m,null,v(C(l),(e,a)=>(o(),r("li",{class:"nav-item",key:e.id,role:"presentation"},[c("button",{onClick:i=>b(e,a),class:g(["nav-link btn-success btn",{active:a==0}]),id:`pills-category-tab${a}`,"data-bs-toggle":"pill","data-bs-target":`#pills-category${a}`,type:"button",role:"tab","aria-controls":`pills-category${a}`,"aria-selected":"true"},B(e.name),11,A)]))),128))])])]),c("div",D,[(o(!0),r(m,null,v(C(l),(e,a)=>(o(),r("div",{class:g(["tab-pane fade",{"active show":a==0}]),key:e.id,id:`pills-category${a}`,role:"tabpanel","aria-labelledby":`pills-category-tab${a}`},[e&&e.productsLoaded&&e.products&&e.products.length>0?(o(),r("div",I,[(o(!0),r(m,null,v(e.products,(i,k)=>(o(),r("div",{class:g("grid-"+k),key:i},[L(t,{product_info:i},null,8,["product_info"])],2))),128))])):P("",!0)],10,E))),128))])])}}};export{R as default};
