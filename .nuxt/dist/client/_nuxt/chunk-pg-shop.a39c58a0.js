import{e as Ne,d as ge,u as ne,b as le,E as P,J as re,z as x,h as ye,g as je,i as Y,c as m,a as e,k as C,w as R,l as u,t as f,F as $,r as L,H as A,m as M,K as G,q as ae,v as oe,L as ie,n as Ee,A as q,p as U,o as h,_ as Pe,M as be,B as z,f as D,G as J,N as Oe,C as Fe,D as Ae,O as ze,P as Xe,Q as He}from"./chunk-pg-brands.8ca8676c.js";const De={class:"container"},Ue={"aria-label":"breadcrumb"},Ke={class:"breadcrumb onmalika-breadcrumb"},Qe={class:"breadcrumb-item"},We={class:"breadcrumb-item"},Ze={class:"breadcrumb-item"},Je={class:"breadcrumb-item"},Ge={class:"breadcrumb-item active","aria-current":"page"},Ye={class:"container"},et={class:"row justify-content-between onmalika-product"},tt={class:"col-6"},st={class:"row"},at={class:"col-2"},ot={class:"onmalika-product-gallery"},it={key:0,class:"onmalika-product-gallery-item active"},nt=["src"],lt={class:"col-10"},rt=["src"],ut=e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ct=[ut],dt=e("p",null,[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13.5639 4.3011L15.1502 7.49508C15.364 7.93681 15.9378 8.35588 16.4216 8.44649L19.2905 8.92219C21.1244 9.22799 21.5519 10.5645 20.2356 11.901L17.9967 14.1549C17.6254 14.5286 17.4116 15.2649 17.5354 15.7972L18.1767 18.5834C18.683 20.7807 17.5129 21.6415 15.589 20.4862L12.9001 18.8779C12.4163 18.5834 11.6062 18.5834 11.1224 18.8779L8.43351 20.4862C6.50963 21.6302 5.33955 20.7807 5.84583 18.5834L6.48712 15.7972C6.58838 15.2535 6.37462 14.5173 6.00334 14.1436L3.76444 11.8896C2.4481 10.5645 2.87563 9.22799 4.7095 8.91086L7.57845 8.43516C8.06223 8.35588 8.63602 7.92548 8.84979 7.48376L10.4361 4.28977C11.3025 2.56819 12.6975 2.56819 13.5639 4.3011Z",fill:"#FFB800"})]),M(" 5.0 ")],-1),ht=e("div",null,null,-1),mt={class:"col-6"},pt={class:"onmalika-product-title"},vt=e("h4",{class:"onmalika-product-short-title"}," Краткое описание: ",-1),_t={class:"onmalika-product-short"},gt={class:"onmalika-product-short"},bt=Ee('<div class="onmalika-product-reviews-stock"><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z" stroke="#46AC36" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M7.75 11.9999L10.58 14.8299L16.25 9.16992" stroke="#46AC36" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg> Есть в наличии </p><button type="button" class="onmalika-product-reviews" data-bs-toggle="modal" data-bs-target="#reviewsModal"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 19H8C4 19 2 18 2 13V8C2 4 4 2 8 2H16C20 2 22 4 22 8V13C22 17 20 19 16 19H15.5C15.19 19 14.89 19.15 14.7 19.4L13.2 21.4C12.54 22.28 11.46 22.28 10.8 21.4L9.3 19.4C9.14 19.18 8.77 19 8.5 19Z" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15.9965 11H16.0054" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11.9945 11H12.0035" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M7.99451 11H8.00349" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span> Отзывы </span></button></div>',1),ft={class:"onmalika-product-price"},yt={class:"mb-3"},kt={class:"onmalika-product-btns"},wt={class:"product-counter"},xt=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"#999",viewBox:"0 0 24 24"},[e("path",{d:"M19 13H5v-2h14v2z"})],-1),Mt=[xt],Ct=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"#999",viewBox:"0 0 24 24"},[e("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1),$t=[Ct],Lt={class:"container"},Tt={class:"row"},Vt={class:"col-6"},St={class:"accordion onmalika-accardion",id:"accordionExample"},Bt={key:0,class:"accordion-item"},Rt=e("h2",{class:"accordion-header"},[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Описание ")],-1),qt={id:"collapseOne",class:"accordion-collapse collapse show","data-bs-parent":"#accordionExample"},It={class:"accordion-body"},Nt={class:"accordion-item"},jt=e("h2",{class:"accordion-header"},[e("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," Характеристики ")],-1),Et={id:"collapseTwo",class:"accordion-collapse collapse","data-bs-parent":"#accordionExample"},Pt={class:"accordion-body"},Ot={class:"col-6"},Ft=["innerHTML"],fe="https://admin.itpapa.uz",At={__name:"[id]",async setup(s){let t,p;const l=Ne();ge();const d=ne(),n=le(),{data:o}=([t,p]=P(()=>q("/products/"+d.params.id)),t=await t,p(),t);if(!o.value||!o.value.category)throw re({statusCode:404,message:"Такого товара нету"});x(5);const v=x(null);ye(async()=>{if(v.value=o.value,v.value){let V=[];v.value.image&&V.push({...v.value.image,id:"main"}),v.value.gallery&&v.value.gallery.length&&(V=V.concat(v.value.gallery.map(_=>({..._.image,id:_.id})))),v.value.images=V}});const T=x(1),O=()=>{T.value++},X=()=>{T.value>1&&T.value--},F=()=>{ge().addToCart(o.value,T.value)},ee=async V=>{await n.push("/brands/"+V)},K=async()=>{l.isAuthenticated?(await q("/user/favorites/",{method:"POST",headers:{Authorization:`Bearer ${token_access.value}`},body:{user:l.user.id,product_id:product_info.id}}),alert("Добавлено в избранные")):alert("Вы не авторизованы")},Q=je(),W=()=>{const V=Q.selectedCurrency,_=o.value.prices_in_currencies[V];return _?`${_.price} ${_.symbol}`:"Цена не указана"};return Y({title:o.value.name,ogTitle:o.value.name}),(V,_)=>{const j=U;return h(),m("div",null,[e("div",De,[e("nav",Ue,[e("ol",Ke,[e("li",Qe,[C(j,{to:"/"},{default:R(()=>[M("Главная")]),_:1})]),e("li",We,[C(j,{to:"/shop"},{default:R(()=>[M("Магазинчик")]),_:1})]),e("li",Ze,[C(j,{to:"/shop/"+u(o).category.parent.slug},{default:R(()=>[M(f(u(o).category.parent.name),1)]),_:1},8,["to"])]),e("li",Je,[C(j,{to:"/shop/"+u(o).category.parent.slug+"/"+u(o).category.slug},{default:R(()=>[M(f(u(o).category.name),1)]),_:1},8,["to"])]),e("li",Ge,f(u(o).name),1)])])]),e("section",null,[e("div",Ye,[e("div",et,[e("div",tt,[e("div",st,[e("div",at,[e("div",ot,[u(o).images&&u(o).images.length>1?(h(),m("div",it,[(h(!0),m($,null,L(u(o).images,(g,y)=>(h(),m("div",{key:g},[e("img",{src:fe+g.url,class:"w-100",alt:""},null,8,nt)]))),128))])):A("",!0)])]),e("div",lt,[(h(!0),m($,null,L(u(o).images,g=>(h(),m("div",{class:"onmalika-product-main-img",key:g},[e("img",{src:fe+g.url,class:"w-100",alt:""},null,8,rt),e("div",{class:"onmalika-product-rating"},[e("button",{type:"button",onClick:K,class:"onmalika-product-favorite"},ct),dt])]))),128))])]),ht]),e("div",mt,[e("h1",pt,f(u(o).name),1),vt,e("p",_t,f(u(o).short_description),1),e("p",gt,f(u(o).sku),1),bt,e("h4",ft,f(W()),1),e("p",yt,[M("Brand: "),C(j,{to:"/brands/"+u(o).brand.slug,onClick:_[0]||(_[0]=G(g=>ee(u(o).brand.slug),["prevent"]))},{default:R(()=>[M(f(u(o).brand.name),1)]),_:1},8,["to"])]),e("div",kt,[e("button",{onClick:F,class:"btn dark-cover",type:"button"}," В корзину "),e("div",wt,[e("button",{type:"button",onClick:X},Mt),ae(e("input",{class:"text-center",type:"text","onUpdate:modelValue":_[1]||(_[1]=g=>ie(T)?T.value=g:null),disabled:""},null,512),[[oe,u(T)]]),e("button",{onClick:O,type:"button"},$t)])])])])])]),e("section",null,[e("div",Lt,[e("div",Tt,[e("div",Vt,[e("div",St,[u(o).description?(h(),m("div",Bt,[Rt,e("div",qt,[e("div",It,f(u(o).description),1)])])):A("",!0),e("div",Nt,[jt,e("div",Et,[e("div",Pt,[(h(!0),m($,null,L(u(o).product_attrs,g=>(h(),m("ul",null,[e("li",null,[M(f(g.attribute.name)+" ",1),e("span",null,f(g.attribute_value.value),1)])]))),256))])])])])]),e("div",Ot,[e("div",{innerHTML:u(o).content},null,8,Ft)])])])])])}}},Xa=Object.freeze(Object.defineProperty({__proto__:null,default:At},Symbol.toStringTag,{value:"Module"}));const zt={name:"MultiRangeSlider",props:{baseClassName:{type:String,default:"multi-range-slider"},min:{type:Number},max:{type:Number},minValue:{type:Number},maxValue:{type:Number},step:{type:Number,default:1},preventWheel:{type:Boolean,default:!1},ruler:{type:Boolean,default:!0},label:{type:Boolean,default:!0},labels:{type:Array},minCaption:{type:String},maxCaption:{type:String},rangeMargin:{type:Number}},data(){let s=this.labels||[],t=this.min===void 0?0:this.min,p=s.length?s.length-1:100,l=this.max===void 0?p:this.max,d=this.minValue===void 0?25:this.minValue;s.length&&this.minValue===void 0&&(d=1);let n=this.maxValue||75;if(s.length&&this.maxValue===void 0&&(n=s.length-2),l<=t)throw new Error("Invalid props min or max");if(d>n)throw new Error("Invalid props minValue or maxValue");let o=this.rangeMargin===void 0?this.step:this.rangeMargin,v=o%this.step;return v&&(o=o+this.step-v),{valueMin:d<t?t:d,valueMax:n>l?l:n,interVal:null,startX:null,mouseMoveCounter:null,barBox:null,barValue:0,rangeMarginValue:o}},methods:{onBarLeftClick(){this.valueMin-this.step>=this.minimum?this.valueMin-=this.step:this.valueMin=this.minimum},onInnerBarLeftClick(){this.valueMin+this.rangeMarginValue<this.valueMax&&(this.valueMin+=this.step)},onBarRightClick(){this.valueMax+this.step<=this.maximum?this.valueMax+=this.step:this.valueMax=this.maximum},onInnerBarRightClick(){this.valueMax-this.rangeMarginValue>this.valueMin&&(this.valueMax-=this.step)},onInputMinChange(s){let t=parseFloat(s.target.value);t<=this.valueMax-this.rangeMarginValue&&t>=this.minimum?this.valueMin=t:s.target.value=this.valueMin},onInputMaxChange(s){let t=parseFloat(s.target.value);t>=this.valueMin+this.rangeMarginValue&&t<=this.maximum?this.valueMax=t:s.target.value=this.valueMax},onLeftThumbMousedown(s){if(s.preventDefault(),this.startX=s.clientX,s.type==="touchstart")if(s.touches.length===1)this.startX=s.touches[0].clientX;else return;this.mouseMoveCounter=0,this.barValue=this.valueMin,this.barBox=s.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onLeftThumbMousemove),document.addEventListener("mouseup",this.onLeftThumbMouseup),document.addEventListener("touchmove",this.onLeftThumbMousemove),document.addEventListener("touchend",this.onLeftThumbMouseup)},onLeftThumbMousemove(s){this.mouseMoveCounter++;let t=s.clientX;s.type==="touchmove"&&(t=s.touches[0].clientX);let l=(t-this.startX)/this.barBox.width,d=this.barValue+(this.maximum-this.minimum)*l,n=d%this.step;d-=n,d<this.minimum?d=this.minimum:d>this.valueMax-this.rangeMarginValue&&(d=this.valueMax-this.rangeMarginValue),this.valueMin=d},onLeftThumbMouseup(){document.removeEventListener("mousemove",this.onLeftThumbMousemove),document.removeEventListener("mouseup",this.onLeftThumbMouseup),document.removeEventListener("touchmove",this.onLeftThumbMousemove),document.removeEventListener("touchend",this.onLeftThumbMouseup)},onRightThumbMousedown(s){if(s.preventDefault(),this.startX=s.clientX,s.type==="touchstart")if(s.touches.length===1)this.startX=s.touches[0].clientX;else return;this.mouseMoveCounter=0,this.barValue=this.valueMax,this.barBox=s.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onRightThumbMousemove),document.addEventListener("mouseup",this.onRightThumbMouseup),document.addEventListener("touchmove",this.onRightThumbMousemove),document.addEventListener("touchend",this.onRightThumbMouseup)},onRightThumbMousemove(s){this.mouseMoveCounter++;let t=s.clientX;s.type==="touchmove"&&(t=s.touches[0].clientX);let l=(t-this.startX)/this.barBox.width,d=this.barValue+(this.maximum-this.minimum)*l,n=d%this.step;d-=n,d<this.valueMin+this.rangeMarginValue?d=this.valueMin+this.rangeMarginValue:d>this.maximum&&(d=this.maximum),this.valueMax=d},onRightThumbMouseup(){document.removeEventListener("mousemove",this.onRightThumbMousemove),document.removeEventListener("mouseup",this.onRightThumbMouseup),document.removeEventListener("touchmove",this.onRightThumbMousemove),document.removeEventListener("touchend",this.onRightThumbMouseup)},onMouseWheel(s){if(this.preventWheel===!0||!s.shiftKey&&!s.ctrlKey)return;let t=this.step;s.deltaY<0&&(t=-t),s.shiftKey&&s.ctrlKey?this.valueMin+t>=this.minimum&&this.valueMax+t<=this.maximum&&(this.valueMin=this.valueMin+t,this.valueMax=this.valueMax+t):s.ctrlKey?(t=this.valueMax+t,t<this.valueMin+this.rangeMarginValue?t=this.valueMin+this.rangeMarginValue:t>this.maximum&&(t=this.maximum),this.valueMax=t):s.shiftKey&&(t=this.valueMin+t,t<this.minimum?t=this.minimum:t>this.valueMax-this.rangeMarginValue&&(t=this.valueMax-this.rangeMarginValue),this.valueMin=t)},triggerInput(){let s=0;this.step.toString().includes(".")&&(s=2);let t={min:this.minimum,max:this.maximum,minValue:parseFloat(this.valueMin.toFixed(s)),maxValue:parseFloat(this.valueMax.toFixed(s))};this.$emit("input",t)}},computed:{minimum(){return this.min===void 0?0:this.min},maximum(){let s=this.labels||[],t=s.length?s.length-1:100;return this.max===void 0?t:this.max},stepCount(){let s=this.labels||[];return s.length?s.length-1:Math.floor((this.maximum-this.minimum)/this.step)},subStepCount(){return(this.labels||[]).length&&this.step>1?(this.maximum-this.minimum)/this.step:0},barMin(){return(this.valueMin-this.minimum)/(this.maximum-this.minimum)*100},barMax(){return 100-(this.valueMax-this.minimum)/(this.maximum-this.minimum)*100},barMinVal(){let s=0;return this.step.toString().includes(".")&&(s=2),(this.valueMin||0).toFixed(s)},barMaxVal(){let s=0;return this.step.toString().includes(".")&&(s=2),(this.valueMax||100).toFixed(s)},scaleLabels(){let s=this.labels||[];return s.length===0&&(s=[],s.push(this.minimum),s.push(this.maximum)),s}},watch:{valueMin(){this.triggerInput()},valueMax(){this.triggerInput()},minValue(s){this.valueMin=s<this.minimum?this.minimum:s},maxValue(s){this.valueMax=s>this.maximum?this.maximum:s}},mounted(){}},Xt={class:"bar"},Ht=["min","max","step","value"],Dt={class:"caption"},Ut={class:"min-caption"},Kt={class:"bar-inner"},Qt=["min","max","step","value"],Wt={class:"caption"},Zt={class:"max-caption"},Jt={key:0,class:"ruler"},Gt={key:1,class:"sub-ruler"},Yt={key:2,class:"labels"};function es(s,t,p,l,d,n){return h(),m("div",{class:z([p.baseClassName,d.rangeMarginValue===0?"zero-ranage-margin":""]),onMousewheel:t[10]||(t[10]=G((...o)=>n.onMouseWheel&&n.onMouseWheel(...o),["prevent","stop"]))},[e("div",Xt,[e("div",{class:"bar-left",style:be({width:n.barMin+"%"}),onClick:t[0]||(t[0]=(...o)=>n.onBarLeftClick&&n.onBarLeftClick(...o))},null,4),e("input",{class:"input-type-range input-type-range-min",type:"range",min:n.minimum,max:n.maximum,step:p.step,value:d.valueMin,onInput:t[1]||(t[1]=G((...o)=>n.onInputMinChange&&n.onInputMinChange(...o),["stop","prevent"]))},null,40,Ht),e("div",{class:"thumb thumb-left",onMousedown:t[2]||(t[2]=(...o)=>n.onLeftThumbMousedown&&n.onLeftThumbMousedown(...o)),onTouchstart:t[3]||(t[3]=(...o)=>n.onLeftThumbMousedown&&n.onLeftThumbMousedown(...o))},[e("div",Dt,[e("span",Ut,f(p.minCaption||n.barMinVal),1)])],32),e("div",Kt,[e("div",{class:"bar-inner-left",onClick:t[4]||(t[4]=(...o)=>n.onInnerBarLeftClick&&n.onInnerBarLeftClick(...o))}),e("div",{class:"bar-inner-right",onClick:t[5]||(t[5]=(...o)=>n.onInnerBarRightClick&&n.onInnerBarRightClick(...o))})]),e("input",{class:"input-type-range input-type-range-max",type:"range",min:n.minimum,max:n.maximum,step:p.step,value:d.valueMax,onInput:t[6]||(t[6]=G((...o)=>n.onInputMaxChange&&n.onInputMaxChange(...o),["stop","prevent"]))},null,40,Qt),e("div",{class:"thumb thumb-right",onMousedown:t[7]||(t[7]=(...o)=>n.onRightThumbMousedown&&n.onRightThumbMousedown(...o)),onTouchstart:t[8]||(t[8]=(...o)=>n.onRightThumbMousedown&&n.onRightThumbMousedown(...o))},[e("div",Wt,[e("span",Zt,f(p.maxCaption||n.barMaxVal),1)])],32),e("div",{class:"bar-right",style:be({width:n.barMax+"%"}),onClick:t[9]||(t[9]=(...o)=>n.onBarRightClick&&n.onBarRightClick(...o))},null,4)]),p.ruler?(h(),m("div",Jt,[(h(!0),m($,null,L(n.stepCount,o=>(h(),m("div",{key:o,class:"ruler-rule"}))),128))])):A("",!0),n.subStepCount?(h(),m("div",Gt,[(h(!0),m($,null,L(n.subStepCount,o=>(h(),m("div",{key:o,class:"ruler-sub-rule"}))),128))])):A("",!0),p.label?(h(),m("div",Yt,[(h(!0),m($,null,L(n.scaleLabels,o=>(h(),m("div",{class:"label",key:o},f(o),1))),128))])):A("",!0)],34)}const ts=Pe(zt,[["render",es]]),ss=Fe(()=>Ae(()=>import("./chunk-pg-brands.8ca8676c.js").then(s=>s.aI),[],import.meta.url).then(s=>s.default||s)),as={class:"container"},os={"aria-label":"breadcrumb"},is={class:"breadcrumb onmalika-breadcrumb"},ns={class:"breadcrumb-item"},ls={class:"breadcrumb-item"},rs={class:"breadcrumb-item"},us={class:"breadcrumb-item active","aria-current":"page"},cs={class:"padding-y"},ds={class:"container"},hs={class:"row mb-4"},ms={class:"col-3"},ps={class:"accordion onmalika-accardion mb-5",id:"accordionCategories"},vs=["id"],_s=["data-bs-target","aria-controls"],gs=["id","aria-labelledby"],bs={class:"accordion-body"},fs={class:"form-check"},ys=["onClick","checked","id","value"],ks=["for"],ws={class:"multi-range mb-5"},xs={class:"multi-range-inputs"},Ms={class:"accordion onmalika-accardion mb-5",id:"accordionFilters"},Cs={class:"accordion-header"},$s=["data-bs-target"],Ls=e("i",{class:"icon-control fa fa-chevron-down"},null,-1),Ts=["id"],Vs={class:"accordion-body"},Ss={class:"form-check mb-2"},Bs=["onClick","checked","onChange","value"],Rs={class:"form-check-label"},qs={class:"col-9"},Is={class:"row justify-content-between mb-3"},Ns={class:"col-3"},js={class:"dropdown onmalika-dropdown"},Es={class:"btn onmalika-dropdown-toggle dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ps=e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13.2807 5.9668L8.93404 10.3135C8.4207 10.8268 7.5807 10.8268 7.06737 10.3135L2.7207 5.9668",stroke:"black","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Os={class:"dropdown-menu onmalika-dropdown-menu"},Fs={class:"form-check dropdown-item"},As=e("label",{class:"form-check-label",for:"price-up"}," По возрастанию цены ",-1),zs={class:"form-check dropdown-item"},Xs=e("label",{class:"form-check-label",for:"price-down"}," По убыванию цены ",-1),Hs={class:"form-check dropdown-item"},Ds=e("label",{class:"form-check-label",for:"ASC"}," В алфавитном порядке ",-1),Us={class:"form-check dropdown-item"},Ks=e("label",{class:"form-check-label",for:"DESC"}," С конца алфавитного порядка ",-1),Qs={class:"col-auto"},Ws={class:"dropdown onmalika-dropdown"},Zs=e("button",{class:"btn onmalika-dropdown-toggle dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[M(" Сколько товаров показывать "),e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13.2807 5.9668L8.93404 10.3135C8.4207 10.8268 7.5807 10.8268 7.06737 10.3135L2.7207 5.9668",stroke:"black","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),Js={class:"dropdown-menu onmalika-dropdown-menu"},Gs={class:"form-check dropdown-item"},Ys=e("label",{class:"form-check-label",for:"price-up"}," 9 ",-1),ea={class:"form-check dropdown-item"},ta=e("label",{class:"form-check-label",for:"price-down"}," 12 ",-1),sa={class:"form-check dropdown-item"},aa=e("label",{class:"form-check-label",for:"ASC"}," 15 ",-1),oa={class:"row row-cols-3"},ia={key:0,"aria-label":"Page navigation example"},na={class:"pagination onmalika-pagination justify-content-center"},la={class:"page-item"},ra=["disabled"],ua=e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7.9763 4.94165L2.91797 9.99998L7.9763 15.0583",stroke:"white","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M17.0836 10H3.05859",stroke:"white","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ca=[ua],da={key:0},ha=e("span",{class:"onmalika-pagination-more"},"...",-1),ma=[ha],pa=["onClick"],va={class:"page-item"},_a=["disabled"],ga=e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.0234 4.94165L17.0818 9.99998L12.0234 15.0583",stroke:"white","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M2.91797 10H16.943",stroke:"white","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ba=[ga],fa={__name:"index",async setup(s){let t,p;const l=ne(),d=le(),n=x(),{data:o}=([t,p]=P(()=>q("/categories/")),t=await t,p(),t),{data:v}=([t,p]=P(()=>q("/categories/"+l.params.subCategory)),t=await t,p(),t),{data:T}=([t,p]=P(()=>q(`/products/?category=${v.value.id}`)),t=await t,p(),t);if(n.value=T.value.attr_filters,!v.value)throw re({statusCode:404,message:"Такой категории нету"});const{data:O}=([t,p]=P(()=>q("/categories/"+l.params.category)),t=await t,p(),t),X=D(()=>o.value),F=x([]),ee=a=>{const i={};return a.results.forEach(r=>{r.subcategories=[],i[r.id]=r}),a.results.forEach(r=>{r.parent&&i[r.parent.id]&&i[r.parent.id].subcategories.push(r)}),a.results.filter(r=>!r.parent)},K=a=>a.subcategories.some(i=>l.params.subCategory===i.slug),Q=x([]),W=x(null),V=x(null),_=x(1),j=x(0),g=x([]),y=x(9),te=a=>{y.value=Number(a),d.push({path:l.path,query:{...l.query,pageSize:a}}),S("/products/?category="+v.value.id+"&limit="+y.value)};y.value=Number(l.query.pageSize)||9,J(()=>l.query.pageSize,a=>{a!==void 0&&a!==y.value&&(y.value=Number(a),S("/products/?category="+v.value.id+"&limit="+y.value))});const H=D(()=>Math.ceil(j.value/y.value)),we=async a=>{const{data:i}=await q("/categories/"+a),r="/shop/"+i.value.parent.slug+"/"+a;d.push(r)},se=x(""),ue=x("Выберите сортировку"),ce=x(""),I=x(0),N=x(1e3),E=x(null),de=a=>{!/[0-9]/.test(a.key)&&a.key!=="Backspace"&&a.key!=="Tab"&&a.preventDefault()},he=(a,i)=>{const r=Number(a);!isNaN(r)&&r>=0?i.value=r:console.error("Invalid input. Please enter a valid number."),me()},xe=a=>{he(a.target.value,I)},Me=a=>{he(a.target.value,N)},Ce=a=>{I.value=a.minValue,N.value=a.maxValue,E.value&&clearTimeout(E.value),me()},me=()=>{E.value&&clearTimeout(E.value),E.value=setTimeout(()=>{let a=`/products/?category=${v.value.id}&limit=${y.value}&price_from=${I.value}&price_to=${N.value}`;l.query.attr&&(a+=`&attr=${l.query.attr}`),S(a)},1e3)};J([I,N],()=>{E.value&&clearTimeout(E.value),E.value=setTimeout(()=>{l.query.attr?S(`/products/?category=${v.value.id}&limit=${y.value}&attr=${l.query.attr}&price_from=${I.value}&price_to=${N.value}`):S(`/products/?category=${v.value.id}&limit=${y.value}&price_from=${I.value}&price_to=${N.value}`)},1e3)});const S=async a=>{try{const r=(await q(a+"&ordering="+ce.value,{cache:!1})).data;Q.value=r.value.results,W.value=r.value.next,V.value=r.value.previous,j.value=r.value.count}catch(i){console.error("Ошибка при получении данных: ",i)}};S("/products/?category="+v.value.id+"&limit="+y.value),l.query.page&&console.log(l.query.page);const $e=async a=>{window.scrollTo(0,0),_.value=a;const i=(a-1)*y.value;let r=`/products/?category=${v.value.id}&limit=${y.value}&offset=${i}`;l.query.attr&&(r+=`&attr=${l.query.attr}`),await S(r),await d.push({path:l.path,query:{...l.query,page:a}})},Le=async()=>{window.scrollTo(0,0);const a=_.value+1;if(a<=H.value){_.value=a;let i=`/products/?category=${v.value.id}&limit=${y.value}&offset=${(a-1)*y.value}`;l.query.attr&&(i+=`&attr=${l.query.attr}`),S(i)}await d.push({path:l.path,query:{...l.query,page:a}})},Te=async()=>{window.scrollTo(0,0);const a=_.value-1;if(a>=1){_.value=a;let i=`/products/?category=${v.value.id}&limit=${y.value}&offset=${(a-1)*y.value}`;l.query.attr&&(i+=`&attr=${l.query.attr}`),S(i),await d.push({path:l.path,query:{...l.query,page:a}})}},pe=a=>{const i=(a-1)*y.value;let r=`/products/?category=${v.value.id}&limit=${y.value}&offset=${i}`;l.query.attr&&(r+=`&attr=${l.query.attr}`),S(r)},Ve=(a,i)=>{a.target.checked||ve(i,!a.target.checked)},Se=(a,i)=>{const r=parseInt(i,10),k=g.value.findIndex(B=>B===r);a.target.checked?k===-1&&g.value.push(r):k!=-1&&g.value.splice(k,1),_e();const{path:c,query:w}=d.currentRoute.value,b={};g.value.length>0&&(b.attr=g.value.map(String).join(",")),d.push({path:c,query:b})};J(g,()=>{const{path:a,query:i}=d.currentRoute.value,r={...i};g.value.length===0?delete r.attr:r.attr=g.value.join(","),d.replace({path:a,query:r})});const Z=(a,i)=>{se.value=a,ue.value=i};J(se,()=>{ce.value=se.value,pe(_.value)});const ve=(a,i)=>{if(i==null||i==!1){const r=parseInt(a,10),k=g.value.findIndex(B=>B===r);k!==-1?g.value.splice(k,1):g.value.push(r);const{path:c,query:w}=d.currentRoute.value,b={...w};g.value.length===0?delete b.attr:b.attr=g.value.join(","),d.push({path:c,query:b}),_e()}},Be=a=>(l.query.attr?l.query.attr.split(",").map(k=>parseInt(k,10)):[]).includes(a),_e=()=>{const a=g.value.join(","),i=`/products/?category=${v.value.id}&limit=${y.value}&attr=${a}`;S(i)};Oe(()=>{W.value=null,V.value=null}),ye(async()=>{const a=await X.value;if(F.value=ee(a),l.query.page){const k=parseInt(l.query.page);_.value=isNaN(k)?1:k}const i=l.query.attr;if(i){const k=i.split(",");for(const c of k){const[w]=c.split(":");n.value.find(B=>B.attribute_values.some(Ie=>Ie.id===parseInt(w)))?(ve(w),await new Promise(B=>setTimeout(B,1))):console.error(`Attribute with ID ${w} not found.`)}}const r=parseInt(l.query.page,10);!isNaN(r)&&r>0?(_.value=r,pe(r)):S("/products/?category="+v.value.id+"&limit="+y.value)});const Re=D(()=>qe(H.value,_.value,2));function qe(a,i,r){let k=i-r,c=i+r;const w=[];k>1&&w.push(1),k>2&&w.push("..."),k=Math.max(k,1),c=Math.min(c,a);for(let b=k;b<=c;b++)w.push(b);return c<a-1&&w.push("..."),c<a&&w.push(a),w}return Y({title:v.value.name,ogTitle:v.value.name}),(a,i)=>{const r=U,k=ss;return h(),m("div",null,[e("div",as,[e("nav",os,[e("ol",is,[e("li",ns,[C(r,{to:"/"},{default:R(()=>[M("Главная")]),_:1})]),e("li",ls,[C(r,{to:"/shop"},{default:R(()=>[M("Магазинчик")]),_:1})]),e("li",rs,[C(r,{to:"/shop/"+u(O).slug},{default:R(()=>[M(f(u(O).name),1)]),_:1},8,["to"])]),e("li",us,f(u(v).name),1)])])]),e("section",cs,[e("div",ds,[e("div",hs,[e("div",ms,[e("div",ps,[(h(!0),m($,null,L(u(F),(c,w)=>(h(),m("div",{class:"accordion-item",key:c.id},[e("h2",{class:"accordion-header",id:"headingOne-"+c.slug},[e("button",{class:z(["accordion-button",{collapsed:!K(c)}]),type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne-"+c.slug,"aria-expanded":"true","aria-controls":"collapseOne-"+c.slug},f(c.name),11,_s)],8,vs),e("div",{id:"collapseOne-"+c.slug,class:z(["accordion-collapse collapse",{show:K(c)}]),"aria-labelledby":"headingOne"+c.slug,"data-bs-parent":"#accordionCategories"},[e("div",bs,[(h(!0),m($,null,L(c.subcategories,b=>(h(),m("div",fs,[e("input",{onClick:B=>we(b.slug),class:"form-check-input",checked:u(l).params.subCategory===b.slug,type:"radio",name:"categoryRadio",id:"category"+b.id,value:b.slug},null,8,ys),e("label",{class:"form-check-label",for:"category"+b.id},f(b.name),9,ks)]))),256))])],10,gs)]))),128))]),e("div",ws,[e("div",xs,[ae(e("input",{onKeydown:de,type:"number","onUpdate:modelValue":i[0]||(i[0]=c=>ie(I)?I.value=c:null),onInput:xe,class:"form-control gray-conrol w-100"},null,544),[[oe,u(I)]]),ae(e("input",{onKeydown:de,type:"number","onUpdate:modelValue":i[1]||(i[1]=c=>ie(N)?N.value=c:null),onInput:Me,class:"form-control gray-conrol w-100"},null,544),[[oe,u(N)]])]),C(u(ts),{min:0,step:100,max:1e3,ruler:!1,label:!1,minValue:u(I),maxValue:u(N),onInput:Ce},null,8,["minValue","maxValue"])]),e("div",Ms,[(h(!0),m($,null,L(u(n),(c,w)=>(h(),m("div",{class:"accordion-item",key:w},[e("h2",Cs,[e("button",{type:"button",class:"accordion-button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"+w},[Ls,M(" "+f(c.attribute.name),1)],8,$s)]),e("div",{class:"accordion-collapse show",id:"collapseOne"+w},[e("div",Vs,[(h(!0),m($,null,L(c.attribute_values,b=>(h(),m("label",Ss,[e("input",{class:"form-check-input",type:"checkbox",onClick:B=>Ve(B,b.id),checked:Be(b.id),onChange:B=>Se(B,b.id),value:b.id},null,40,Bs),e("span",Rs,f(b.value),1)]))),256))])],8,Ts)]))),128))])]),e("div",qs,[e("div",Is,[e("div",Ns,[e("div",js,[e("button",Es,[M(f(u(ue))+" ",1),Ps]),e("ul",Os,[e("li",null,[e("div",Fs,[e("input",{onClick:i[2]||(i[2]=c=>Z("price","По возрастанию цены")),class:"form-check-input",type:"radio",name:"sortRadio",id:"price-up"}),As])]),e("li",null,[e("div",zs,[e("input",{onClick:i[3]||(i[3]=c=>Z("-price","По убыванию цены")),class:"form-check-input",type:"radio",name:"sortRadio",id:"price-down"}),Xs])]),e("li",null,[e("div",Hs,[e("input",{onClick:i[4]||(i[4]=c=>Z("name","В алфавитном порядке")),class:"form-check-input",type:"radio",name:"sortRadio",id:"ASC"}),Ds])]),e("li",null,[e("div",Us,[e("input",{onClick:i[5]||(i[5]=c=>Z("-name","С конца алфавитного порядка")),class:"form-check-input",type:"radio",name:"sortRadio",id:"DESC"}),Ks])])])])]),e("div",Qs,[e("div",Ws,[Zs,e("ul",Js,[e("li",null,[e("div",Gs,[e("input",{onClick:i[6]||(i[6]=c=>te("9")),class:"form-check-input",type:"radio",name:"categoryRadio",id:"price-up"}),Ys])]),e("li",null,[e("div",ea,[e("input",{onClick:i[7]||(i[7]=c=>te("12")),class:"form-check-input",type:"radio",name:"categoryRadio",id:"price-down"}),ta])]),e("li",null,[e("div",sa,[e("input",{onClick:i[8]||(i[8]=c=>te("15")),class:"form-check-input",type:"radio",name:"categoryRadio",id:"ASC"}),aa])])])])])]),e("div",oa,[(h(!0),m($,null,L(u(Q),c=>(h(),m("div",{class:"col mb-4",key:c.id},[C(k,{product_info:c},null,8,["product_info"])]))),128))])])]),u(H)>1?(h(),m("nav",ia,[e("ul",na,[e("li",la,[e("button",{type:"button",class:z(["dark-cover",{disabled:u(_)===1}]),onClick:Te,disabled:u(_)===1},ca,10,ra)]),(h(!0),m($,null,L(u(Re),c=>(h(),m("li",{class:"page-item",key:c},[c==="..."?(h(),m("div",da,ma)):(h(),m("button",{key:1,type:"button",class:z(["onmalika-pagination-links",{active:c===u(_)}]),onClick:w=>$e(c)},f(c),11,pa))]))),128)),e("li",va,[e("button",{type:"button",class:z(["dark-cover",{disabled:u(_)===u(H)}]),onClick:Le,disabled:u(_)===u(H)},ba,10,_a)])])])):A("",!0)])])])}}},Ha=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"})),ya=["src"],ka="https://admin.itpapa.uz",wa={__name:"CategoryCard",props:{category_info:{type:Object,required:!0}},setup(s){const t=s,{category_info:p}=t;return(l,d)=>{const n=U;return h(),ze(n,{to:(l._.provides[Xe]||l.$route).path+"/"+u(p).slug,class:"card h-100 onmalika-category-card text-center"},{default:R(()=>[u(p).image?(h(),m("img",{key:0,src:ka+u(p).image.url,class:"w-100",alt:"..."},null,8,ya)):A("",!0),e("p",null,f(u(p).name),1)]),_:1},8,["to"])}}},ke=wa,xa={class:"container"},Ma={"aria-label":"breadcrumb"},Ca={class:"breadcrumb onmalika-breadcrumb"},$a={class:"breadcrumb-item"},La={class:"breadcrumb-item"},Ta={class:"breadcrumb-item active","aria-current":"page"},Va={class:"padding-y"},Sa={class:"container"},Ba={class:"row row-cols-5"},Ra={__name:"index",async setup(s){let t,p;const d=ne().params.category;le().options.history.state.back;const{data:n}=([t,p]=P(()=>q("/categories/?parent_slug="+d)),t=await t,p(),t);if(!n.value||!n.value)throw re({statusCode:404,message:"Такой категории нету"});const{data:o}=([t,p]=P(()=>q("/categories/"+d)),t=await t,p(),t);return D(()=>n.value),D(()=>o.value),Y({title:o.value.name,ogTitle:o.value.name}),(v,T)=>{const O=U,X=ke;return h(),m("div",null,[e("div",xa,[e("nav",Ma,[e("ol",Ca,[e("li",$a,[C(O,{to:"/"},{default:R(()=>[M("Главная")]),_:1})]),e("li",La,[C(O,{to:"/shop"},{default:R(()=>[M("Магазинчик")]),_:1})]),e("li",Ta,f(u(o).name),1)])])]),e("section",Va,[e("div",Sa,[e("div",Ba,[(h(!0),m($,null,L(u(n).results,F=>(h(),m("div",{class:"col",key:F.id},[C(X,{category_info:F},null,8,["category_info"])]))),128))])])])])}}},Da=Object.freeze(Object.defineProperty({__proto__:null,default:Ra},Symbol.toStringTag,{value:"Module"})),qa={class:"container"},Ia={"aria-label":"breadcrumb"},Na={class:"breadcrumb onmalika-breadcrumb"},ja={class:"breadcrumb-item"},Ea=e("li",{class:"breadcrumb-item active","aria-current":"page"},"Магазинчик",-1),Pa={class:"padding-y"},Oa={class:"container"},Fa={class:"row row-cols-5"},Aa={__name:"index",async setup(s){let t,p;const{data:l}=([t,p]=P(()=>q("/categories/?parent_null=true")),t=await t,p(),t);return Y({title:"Магазинчик",ogTitle:"Магазинчик"}),He({title:"Магазинчик",meta:[{name:"Магазинчик 1",content:""}]}),(d,n)=>{const o=U,v=ke;return h(),m("div",null,[e("div",qa,[e("nav",Ia,[e("ol",Na,[e("li",ja,[C(o,{to:"/"},{default:R(()=>[M("Главная")]),_:1})]),Ea])])]),e("section",Pa,[e("div",Oa,[e("div",Fa,[(h(!0),m($,null,L(u(l).results,T=>(h(),m("div",{class:"col",key:T.id},[C(v,{category_info:T},null,8,["category_info"])]))),128))])])])])}}},Ua=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"}));export{Xa as _,Da as a,Ua as b,Ha as i};
